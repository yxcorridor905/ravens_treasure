# 更新日志

## v1.2 - 开发者版 (2026-02-06)

### ✨ 新增功能
- 记录天数统计功能
  - 从第一次记录开始计算总天数
  - 自动增长，无需每天记录

### 🐛 Bug 修复
- 修复个人中心"记录天数"显示为空白的问题
- 修复 `updateAIStatus` 方法缺失导致的错误
- 添加 `timestamp` 字段用于准确计算天数

### 🔧 优化改进
- 移除用户端 API 设置界面
- API Key 配置改为开发者后台配置
- 增强的控制台日志输出
- 添加 `testAI()` 调试函数

### 📝 文档更新
- 新增详细的部署指南
- 新增 API 配置说明文档
- 更新 README 说明

---

## v1.1 - AI 增强版 (2026-02-05)

### ✨ 核心功能
- 集成 DeepSeek AI API
- AI 智能生成宝藏名称和点评
- 自动降级到本地模式
- 用户可配置 API Key

### 🎨 界面优化
- 精美的魔法阵动画效果
- 多种魔法阵样式（6种）
- 粒子特效系统
- 响应式设计支持

### 🎵 音频系统
- 背景音乐（程序化生成）
- 交互音效
  - 按钮点击音效
  - 生成宝藏音效
  - 宝箱打开音效
  - 抽取宝藏音效
- 音量独立控制

### 💾 数据管理
- LocalStorage 本地存储
- 宝藏数据持久化
- 支持清空功能

---

## v1.0 - 初始版本 (2026-02-01)

### 基础功能
- 情绪选择（9种情绪）
  - 舒爽、明媚、灵感涌现、平静
  - 自我安抚、烦躁、焦虑、负重、愤怒
- 内容记录输入
- 本地模式宝藏生成
- 宝藏盒管理
- 随机抽取功能

### 界面设计
- 仿古风格设计
- 羊皮纸背景
- 手机端适配
- Tab Bar 导航

### 页面结构
- 记录页
- 宝藏盒页
- 抽取页
- 个人中心页

---

## 🔮 计划中的功能

### v1.3 (计划中)
- [ ] 数据导出/导入功能
- [ ] 宝藏分类和标签
- [ ] 搜索和筛选功能
- [ ] 统计图表可视化

### v1.4 (计划中)
- [ ] 主题切换（明亮/暗黑模式）
- [ ] 更多魔法阵样式
- [ ] 自定义情绪标签
- [ ] 宝藏分享功能

### v2.0 (未来规划)
- [ ] 多设备同步
- [ ] 云端备份
- [ ] 社区功能
- [ ] 成就系统
- [ ] 连续记录打卡
- [ ] 情绪趋势分析

---

## 📊 版本对比

| 功能 | v1.0 | v1.1 | v1.2 |
|------|------|------|------|
| 基础记录 | ✅ | ✅ | ✅ |
| 本地生成 | ✅ | ✅ | ✅ |
| AI 生成 | ❌ | ✅ | ✅ |
| 音频系统 | ❌ | ✅ | ✅ |
| 记录天数 | ❌ | ❌ | ✅ |
| 用户配置 API | ❌ | ✅ | ❌ |
| 开发者配置 | ❌ | ❌ | ✅ |

---

## 🐛 已知问题

### 当前版本 (v1.2)
- 旧版本数据（v1.1 之前）可能缺少 timestamp 字段，记录天数统计可能不准确

### 兼容性问题
- Safari 15 以下版本可能存在音频播放问题
- IE 浏览器不支持（建议使用现代浏览器）

---

## 💡 贡献指南

### 报告 Bug
如果您发现问题，请提供：
1. 浏览器和版本
2. 复现步骤
3. 控制台错误信息
4. 预期行为 vs 实际行为

### 功能建议
欢迎提出新功能建议：
1. 描述功能需求
2. 说明使用场景
3. 提供参考案例（如有）

---

## 🔄 更新说明

### 如何更新

**方法 1：完整替换**
1. 备份当前的 LocalStorage 数据（重要！）
2. 用新版本替换旧的 index.html
3. 清除浏览器缓存
4. 重新配置 API Key（如果需要）

**方法 2：保留数据更新**
1. 导出现有宝藏数据（未来版本将支持）
2. 部署新版本
3. 导入数据

### 数据迁移

从 v1.1 升级到 v1.2：
- 数据格式兼容
- 建议清空并重新创建宝藏以获得完整统计

---

## 📞 支持

如有问题或需要帮助：
1. 查看文档：README.md, DEPLOYMENT.md, API_CONFIG.md
2. 检查控制台日志
3. 使用 `testAI()` 诊断功能

---

**感谢使用乌鸦的宝藏！** 🎉✨

您的每一个记录，都是珍贵的宝藏。
